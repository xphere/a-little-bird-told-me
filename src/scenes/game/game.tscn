[gd_scene load_steps=23 format=2]

[ext_resource path="res://assets/themes/game.theme.tres" type="Theme" id=1]
[ext_resource path="res://src/ui/dialog-box/dialog-box.tscn" type="PackedScene" id=2]
[ext_resource path="res://src/screens/tower/tower.tscn" type="PackedScene" id=3]
[ext_resource path="res://src/screens/mail-desk/mail-desk.tscn" type="PackedScene" id=4]
[ext_resource path="res://src/stories/start.tscn" type="PackedScene" id=5]
[ext_resource path="res://src/screens/letter/letter.tscn" type="PackedScene" id=6]
[ext_resource path="res://src/scenes/game/cursor.gd" type="Script" id=7]
[ext_resource path="res://src/scenes/game/game.gd" type="Script" id=8]
[ext_resource path="res://src/scenes/game/story.gd" type="Script" id=9]
[ext_resource path="res://src/stories/discoveries.tscn" type="PackedScene" id=10]
[ext_resource path="res://src/stories/debug.tscn" type="PackedScene" id=11]
[ext_resource path="res://src/objects/letters/letter.tscn" type="PackedScene" id=12]
[ext_resource path="res://src/objects/letters/letter.gd" type="Script" id=13]
[ext_resource path="res://src/actions/advance-time.gd" type="Script" id=14]
[ext_resource path="res://modules/action/execute.gd" type="Script" id=15]
[ext_resource path="res://modules/action/serial.gd" type="Script" id=16]
[ext_resource path="res://assets/sound/monk_tune_extended.ogg" type="AudioStream" id=17]
[ext_resource path="res://modules/context/context.gd" type="Script" id=18]
[ext_resource path="res://assets/sound/select.ogg" type="AudioStream" id=19]
[ext_resource path="res://src/screens/mailbox/mailbox.tscn" type="PackedScene" id=20]
[ext_resource path="res://src/scenes/game/planned.gd" type="Script" id=21]
[ext_resource path="res://src/objects/letters/section.gd" type="Script" id=22]

[node name="Game" type="Control"]
anchor_right = 1.0
anchor_bottom = 1.0
theme = ExtResource( 1 )
script = ExtResource( 8 )

[node name="Tower" parent="." instance=ExtResource( 3 )]
visible = false

[node name="MailDesk" parent="." instance=ExtResource( 4 )]
visible = false
LetterObject = ExtResource( 13 )
LetterScene = ExtResource( 12 )

[node name="Letter" parent="." instance=ExtResource( 6 )]
visible = false

[node name="MailBox" parent="." instance=ExtResource( 20 )]
visible = false

[node name="DialogBox" parent="." instance=ExtResource( 2 )]
visible = false

[node name="Cursor" type="Node2D" parent="."]
script = ExtResource( 7 )
layers_2d_physics = 1

[node name="Select" type="AudioStreamPlayer" parent="Cursor"]
stream = ExtResource( 19 )
volume_db = -15.0

[node name="Context" type="Node" parent="."]
script = ExtResource( 18 )

[node name="Planned" type="Node" parent="."]
script = ExtResource( 21 )

[node name="Story" type="Node" parent="."]
script = ExtResource( 9 )
first = "laudes"
default_mapping = {
"laudes": "no-action",
"visperas": "no-action"
}

[node name="default" type="Node" parent="Story"]
script = ExtResource( 16 )

[node name="update-birds" type="Node" parent="Story/default"]
script = ExtResource( 15 )
expression_contents = "update_birds()"

[node name="default#no-action" type="Node" parent="Story"]
script = ExtResource( 14 )

[node name="Day#-1" parent="Story" instance=ExtResource( 11 )]

[node name="Day#-2" parent="Story" instance=ExtResource( 5 )]

[node name="Recipients" type="Node" parent="."]

[node name="king" type="Node" parent="Recipients"]
script = ExtResource( 22 )
title = "The King"
content = "To Your Majesty the King of Earauthain
I wish to inform you of an important event I believe deserves your attention."

[node name="queen" type="Node" parent="Recipients"]
script = ExtResource( 22 )
title = "The Queen"
content = "To Your Majesty the Queen of Earauthain
I wish to inform you of an important event I believe deserves your attention."

[node name="witch" type="Node" parent="Recipients"]
script = ExtResource( 22 )
title = "The Witch"
content = "To the witch in the forest"

[node name="aristocrats" type="Node" parent="Recipients"]
script = ExtResource( 22 )
title = "Aristocrats"
content = "To the aristocrats"

[node name="inn-keeper" type="Node" parent="Recipients"]
script = ExtResource( 22 )
title = "Inn-Keeper"
content = "To the inn-keeper of The Happy Bagpipe"

[node name="Topics" type="Node" parent="."]

[node name="bar" type="Node" parent="Topics"]
script = ExtResource( 22 )
title = "B.A.R."
content = "I would like to ask you about this reading B.A.R. at the end of the letters. What is their meaning?"

[node name="beverages" type="Node" parent="Topics"]
script = ExtResource( 22 )
title = "Beverages"
content = "I wonder if you can send some of your best beverages to the soldier camp outside town?"

[node name="soldiers" type="Node" parent="Topics"]
script = ExtResource( 22 )
title = "Soldiers"
content = "I've heard rumours of enemy movement near the east frontier. Would you send a soldier troop to the zone? Just to make sure."

[node name="Closings" type="Node" parent="."]

[node name="request-info" type="Node" parent="Closings"]
script = ExtResource( 22 )
title = "Gossips"
content = "As usual, any information you can provide to me will be disclosed to The Crown."

[node name="your-humble-servant" type="Node" parent="Closings"]
script = ExtResource( 22 )
title = "Your humble servant"
content = "Your humble servant,"

[node name="Signatures" type="Node" parent="."]

[node name="maester" type="Node" parent="Signatures"]
script = ExtResource( 22 )
title = "Bird Caretaker"
content = "The Kingdom's Bird Caretaker"

[node name="ear-of-the-king" type="Node" parent="Signatures"]
script = ExtResource( 22 )
title = "Ear of the King"
content = "The Ear of the King"

[node name="Discoveries" parent="." instance=ExtResource( 10 )]

[node name="Music" type="AudioStreamPlayer" parent="."]
stream = ExtResource( 17 )
autoplay = true
bus = "Music"

[connection signal="entered" from="Cursor" to="." method="_on_Cursor_entered"]
[connection signal="help" from="Cursor" to="." method="_on_Cursor_help"]
[connection signal="interact" from="Cursor" to="." method="_on_Cursor_interact"]
