[gd_scene load_steps=16 format=2]

[ext_resource path="res://assets/themes/game.theme.tres" type="Theme" id=1]
[ext_resource path="res://src/ui/dialog-box/dialog-box.tscn" type="PackedScene" id=2]
[ext_resource path="res://src/screens/tower/tower.tscn" type="PackedScene" id=3]
[ext_resource path="res://src/screens/mail-desk/mail-desk.tscn" type="PackedScene" id=4]
[ext_resource path="res://src/stories/start.tscn" type="PackedScene" id=5]
[ext_resource path="res://src/screens/letter/letter.tscn" type="PackedScene" id=6]
[ext_resource path="res://src/scenes/game/cursor.gd" type="Script" id=7]
[ext_resource path="res://src/scenes/game/game.gd" type="Script" id=8]
[ext_resource path="res://modules/action/match.gd" type="Script" id=9]
[ext_resource path="res://modules/action/serial.gd" type="Script" id=11]
[ext_resource path="res://src/scenes/game/topics.gd" type="Script" id=17]
[ext_resource path="res://modules/context/context.gd" type="Script" id=18]
[ext_resource path="res://src/actions/dialog.gd" type="Script" id=19]
[ext_resource path="res://modules/action/action.gd" type="Script" id=20]
[ext_resource path="res://modules/action/sequential.gd" type="Script" id=22]

[node name="Game" type="Control"]
anchor_right = 1.0
anchor_bottom = 1.0
theme = ExtResource( 1 )
script = ExtResource( 8 )

[node name="Tower" parent="." instance=ExtResource( 3 )]
visible = false

[node name="MailDesk" parent="." instance=ExtResource( 4 )]
visible = false

[node name="Letter" parent="." instance=ExtResource( 6 )]
visible = false

[node name="DialogBox" parent="." instance=ExtResource( 2 )]
visible = false

[node name="Cursor" type="Node2D" parent="."]
script = ExtResource( 7 )
layers_2d_physics = 1

[node name="Context" type="Node" parent="."]
script = ExtResource( 18 )

[node name="Story" type="Node" parent="."]
script = ExtResource( 9 )
expression_contents = "\"Day#%d\" % context(\"day\", 0)"

[node name="Day#0" parent="Story" instance=ExtResource( 5 )]

[node name="Topics" type="Node" parent="."]
script = ExtResource( 17 )

[node name="messages" type="Node" parent="Topics"]
script = ExtResource( 22 )
loop = false

[node name="0" type="Node" parent="Topics/messages"]
script = ExtResource( 11 )

[node name="dialog#1" type="Node" parent="Topics/messages/0"]
script = ExtResource( 19 )
speaker = "maester"
dialog = "What's this in your leg?"

[node name="dialog#2" type="Node" parent="Topics/messages/0"]
script = ExtResource( 19 )
speaker = "maester"
dialog = "A letter?"

[node name="dialog#3" type="Node" parent="Topics/messages/0"]
script = ExtResource( 19 )
speaker = "maester"
dialog = "I'll leave it at the desk"

[node name="1" type="Node" parent="Topics/messages"]
script = ExtResource( 11 )

[node name="dialog#1" type="Node" parent="Topics/messages/1"]
script = ExtResource( 19 )
speaker = "maester"
dialog = "Another message? Let's see..."

[node name="2" type="Node" parent="Topics/messages"]
script = ExtResource( 20 )

[connection signal="bird_arrived" from="Tower" to="." method="_on_Tower_bird_arrived"]
[connection signal="bird_picked" from="Tower" to="." method="_on_Tower_bird_picked"]
[connection signal="entered" from="Cursor" to="." method="_on_Cursor_entered"]
[connection signal="help" from="Cursor" to="." method="_on_Cursor_help"]
[connection signal="interact" from="Cursor" to="." method="_on_Cursor_interact"]
